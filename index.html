<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinCon - Financial Confidence Made Easy! ğŸš€</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#2c3e50">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="FinCon">
    <meta name="msapplication-TileColor" content="#2c3e50">
    <meta name="msapplication-tap-highlight" content="no">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Styles and Fonts -->
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- PWA Icons -->
    <link rel="apple-touch-icon" sizes="192x192" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMjQiIGZpbGw9IiMyYzNlNTAiLz4KPHN2ZyB4PSI0OCIgeT0iNDgiIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjZmZmIj4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMCA5TDEzLjA5IDE1Ljc0TDEyIDIyTDEwLjkxIDE1Ljc0TDQgOUwxMC45MSA4LjI2TDEyIDJaIiBmaWxsPSIjZmZmIi8+CjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9IiMyYzNlNTAiLz4KPC9zdmc+CjwvZz4KPC9zdmc+">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-S22BHE1Y7T"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-S22BHE1Y7T');
    </script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="logo">ğŸ’° FinCon</h1>
            <p class="tagline">Your Financial Confidence Booster! <span class="malaysia-flag">ğŸ‡²ğŸ‡¾</span></p>
        </header>

        <!-- API Configuration -->
        <div class="api-config">
            <label for="apiKey">ğŸ¤– OpenAI API Key (for dynamic explanations):</label>
            <input type="password" id="apiKey" placeholder="sk-..." onchange="setOpenAIKey(this.value)">
            <small>Enter your OpenAI API key to get personalized, dynamic explanations. Leave empty to use static explanations.</small>
        </div>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="tab-btn active" onclick="showTab('retirement')">
                ğŸï¸ Retirement Dreams
            </button>
            <button class="tab-btn" onclick="showTab('loan')">
                ğŸ  Loan Calculator
            </button>
        </nav>

        <!-- Retirement Calculator Tab -->
        <div id="retirement" class="tab-content active">
            <div class="calculator-section">
                <h2>ğŸï¸ Retirement Corpus Calculator</h2>
                <div class="explanation-box">
                    <h3>What's This About? ğŸ¤”</h3>
                    <p>Retirement corpus is basically your "chill fund" - the money you need to have saved up so you can live comfortably without working! Think of it as your ticket to freedom where you can lepak at the beach instead of rushing to work every morning.</p>
                    <p>In Malaysia, with our amazing food and lifestyle, you'll want to make sure you have enough to enjoy your teh tarik and roti canai without worrying about money! ğŸœ</p>
                </div>

                <div class="input-group">
                    <label for="currentAge">Your Current Age:</label>
                    <input type="number" id="currentAge" placeholder="e.g., 25" min="18" max="80">
                </div>

                <div class="input-group">
                    <label for="retirementAge">When Do You Want to Retire?</label>
                    <input type="number" id="retirementAge" placeholder="e.g., 60" min="40" max="80">
                </div>

                <div class="input-group">
                    <label for="monthlyExpenses">Monthly Living Expenses (RM):</label>
                    <input type="number" id="monthlyExpenses" placeholder="e.g., 3000" min="1000">
                    <small>Include everything: food, rent, utilities, entertainment, medical</small>
                </div>

                <div class="input-group">
                    <label for="inflationRate">Inflation Rate (%):</label>
                    <input type="number" id="inflationRate" placeholder="3" step="0.1" min="0" max="10">
                    <small>Malaysia's average inflation is around 2-4% per year</small>
                </div>

                <div class="input-group">
                    <label for="expectedReturn">Expected Investment Return (%):</label>
                    <input type="number" id="expectedReturn" placeholder="8" step="0.1" min="0" max="20">
                    <small>Malaysian equity funds average 6-10% annually</small>
                </div>

                <button class="calculate-btn" onclick="calculateRetirement()">
                    Calculate My Freedom Fund! ğŸš€
                </button>

                <div id="retirementResult" class="result-section" style="display: none;">
                    <h3>Your Retirement Plan ğŸ“Š</h3>
                    <div class="result-grid">
                        <div class="result-card">
                            <h4>ğŸ’° Total Corpus Needed</h4>
                            <p class="result-value" id="totalCorpus">RM 0</p>
                        </div>
                        <div class="result-card">
                            <h4>ğŸ’¸ Monthly Savings Required</h4>
                            <p class="result-value" id="monthlySavings">RM 0</p>
                        </div>
                        <div class="result-card">
                            <h4>ğŸ“ˆ Future Monthly Expenses</h4>
                            <p class="result-value" id="futureExpenses">RM 0</p>
                        </div>
                    </div>
                    <div class="explanation-result">
                        <h4>What This Means ğŸ¯</h4>
                        <p id="retirementExplanation"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loan Calculator Tab -->
        <div id="loan" class="tab-content">
            <div class="calculator-section">
                <h2>ğŸ  Loan Amortization Calculator</h2>
                <div class="explanation-box">
                    <h3>What's Amortization? ğŸ¤·â€â™‚ï¸</h3>
                    <p>Amortization is just a fancy word for "how your loan payments work over time." Every month, part of your payment goes to interest (the bank's profit) and part goes to paying down the actual loan amount.</p>
                    <p>In Malaysia, most home loans have reducing balance interest - meaning as you pay more, the interest gets smaller. It's like eating a kuih layer by layer! ğŸ§</p>
                </div>

                <div class="input-group">
                    <label for="loanAmount">Loan Amount (RM):</label>
                    <input type="number" id="loanAmount" placeholder="e.g., 500000" min="10000">
                    <small>Your dream home price minus down payment</small>
                </div>

                <div class="input-group">
                    <label for="interestRate">Interest Rate (% per year):</label>
                    <input type="number" id="interestRate" placeholder="4.5" step="0.1" min="0" max="15">
                    <small>Malaysian home loans are typically 3.5-5.5%</small>
                </div>

                <div class="input-group">
                    <label for="loanTerm">Loan Term (years):</label>
                    <input type="number" id="loanTerm" placeholder="30" min="1" max="40">
                    <small>Most Malaysian home loans are 25-35 years</small>
                </div>

                <button class="calculate-btn" onclick="calculateLoan()">
                    Show Me My Payment Plan! ğŸ¡
                </button>

                <div id="loanResult" class="result-section" style="display: none;">
                    <h3>Your Loan Breakdown ğŸ“‹</h3>
                    <div class="result-grid">
                        <div class="result-card">
                            <h4>ğŸ’³ Monthly Payment</h4>
                            <p class="result-value" id="monthlyPayment">RM 0</p>
                        </div>
                        <div class="result-card">
                            <h4>ğŸ’° Total Interest</h4>
                            <p class="result-value" id="totalInterest">RM 0</p>
                        </div>
                        <div class="result-card">
                            <h4>ğŸ“Š Total Amount Paid</h4>
                            <p class="result-value" id="totalPaid">RM 0</p>
                        </div>
                    </div>
                    <div class="explanation-result">
                        <h4>The Real Deal ğŸ’¡</h4>
                        <p id="loanExplanation"></p>
                    </div>
                    <div class="amortization-schedule">
                        <h4>Payment Schedule (First 12 Months) ğŸ“…</h4>
                        <div class="schedule-container">
                            <table id="scheduleTable">
                                <thead>
                                    <tr>
                                        <th>Month</th>
                                        <th>Payment</th>
                                        <th>Interest</th>
                                        <th>Principal</th>
                                        <th>Balance</th>
                                    </tr>
                                </thead>
                                <tbody id="scheduleBody">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p>Made with â¤ï¸ for Malaysians | Always consult a financial advisor for major decisions!</p>
        </footer>
    </div>

    <script src="config.js"></script>
    <script src="script.js"></script>
</body>
</html>